(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{70851:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/history",function(){return s(48780)}])},48780:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(85893),n=s(67294),d=s(33353),i=s(52448),c=s(93387),l=s(54568),h=s(80541),a=s(78552);function x(){let{wallet:e,signedAccountId:t}=(0,n.useContext)(h.e),[s,x]=(0,n.useState)([]),[o,j]=(0,n.useState)([]),[u,m]=(0,n.useState)(!0),[p,_]=(0,n.useState)(null);async function f(){try{let s=await e.viewMethod({contractId:a.JU,method:"get_game_results"});x(s);let r=await e.viewMethod({contractId:a.JU,method:"get_user_records",args:{player:t}});j(r),m(!1)}catch(e){_(e.message),m(!1)}}return((0,n.useEffect)(()=>{if(!e){m(!1);return}f()},[e]),u)?(0,r.jsxs)(d.Z,{className:"text-center mt-5",children:[(0,r.jsx)(i.Z,{animation:"border",role:"status",children:(0,r.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,r.jsx)("p",{children:"Loading game results..."})]}):p?(0,r.jsx)(d.Z,{className:"mt-5",children:(0,r.jsxs)(c.Z,{variant:"danger",children:[(0,r.jsx)(c.Z.Heading,{children:"Error"}),(0,r.jsx)("p",{children:p})]})}):(0,r.jsxs)(d.Z,{className:"mt-5",children:[(0,r.jsx)("h1",{className:"mb-4",children:"Bet History"}),(0,r.jsxs)(l.Z,{striped:!0,bordered:!0,hover:!0,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"#"}),(0,r.jsx)("th",{children:"Player"}),(0,r.jsx)("th",{children:"Player Guess"}),(0,r.jsx)("th",{children:"Amount"}),(0,r.jsx)("th",{children:"Timestamp"})]})}),(0,r.jsx)("tbody",{children:o.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t+1}),(0,r.jsx)("td",{children:e.player}),(0,r.jsx)("td",{children:e.player_guess}),(0,r.jsxs)("td",{children:[e.amount," NEAR"]}),(0,r.jsx)("td",{children:new Date(e.timestamp/1e6).toLocaleString()})]},t))})]}),(0,r.jsx)("h1",{className:"mb-4",children:"Game Results"}),(0,r.jsxs)(l.Z,{striped:!0,bordered:!0,hover:!0,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"#"}),(0,r.jsx)("th",{children:"Player"}),(0,r.jsx)("th",{children:"Outcome"}),(0,r.jsx)("th",{children:"Result"}),(0,r.jsx)("th",{children:"Timestamp"})]})}),(0,r.jsx)("tbody",{children:s.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t+1}),(0,r.jsx)("td",{children:e.player}),(0,r.jsx)("td",{children:e.outcome}),(0,r.jsx)("td",{children:"win"===e.result?"Win":"Lose"}),(0,r.jsx)("td",{children:new Date(e.timestamp/1e6).toLocaleString()})]},t))})]})]})}}},function(e){e.O(0,[630,888,774,179],function(){return e(e.s=70851)}),_N_E=e.O()}]);